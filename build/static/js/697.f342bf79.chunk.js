"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[697],{2466:(e,a,t)=>{e.exports=t.p+"static/media/coin-icon.ef70a3a9cda1a723e8ea.png"},3264:(e,a,t)=>{t.d(a,{A:()=>s});const n="PageGap_wrapper__QxVU-";var r=t(579);const s=e=>{let{children:a}=e;return(0,r.jsx)("div",{className:n,children:a})}},3417:(e,a,t)=>{t.d(a,{A:()=>d});var n=t(5043),r=t(6213),s=t(927),c=t(7118),i=t(3494);function d(e){const{userCredits:a,setCredits:t}=(0,i._)(),[d,l]=(0,n.useState)(!1),{token:o,logoutAction:m}=(0,c.h)();return(0,n.useEffect)((()=>{if(!e)return;(async()=>{l(!0);try{const a={headers:{"Content-Type":"text/plain;charset=utf-8"},redirect:"follow",mode:"cors",method:"POST"},n=await r.A.post(s.on,{matric:e,type:"shopData",token:o},a);if("DATA RETRIEVAL SUCCESSFUL"===n.data.status&&t(n.data.info.currentInnocredit),"Invalid token"===n.data.error)return m(!0)}catch(a){console.error(a)}finally{l(!1)}})()}),[e]),{userCredits:a,loading:d}}},4881:(e,a,t)=>{t.d(a,{A:()=>d});const n="BackButton_detail-header-button__EQ4ZY";var r=t(3216),s=t(9705),c=t(3058),i=t(579);const d=e=>{let{to:a}=e;const t=(0,r.Zp)(),d="default"!==(0,r.zy)().key;return(0,i.jsx)(c.A,{className:n,onClick:()=>{t(a||(d?-1:"/"))},startIcon:(0,i.jsx)(s.h,{}),variant:"outlined",children:"Back"})}},6697:(e,a,t)=>{t.r(a),t.d(a,{default:()=>f});var n=t(5043),r=t(3216),s=t(567),c=t(231),i=t(1750),d=t(4881),l=t(3264),o=t(9913),m=t(2466);const u={"heading-space":"Acknowledgement_heading-space__S5EJp","heading-text":"Acknowledgement_heading-text__vXvZs","credits-wrapper":"Acknowledgement_credits-wrapper__mnfIU",credits:"Acknowledgement_credits__svsnI","credits-label":"Acknowledgement_credits-label__Lvqb1","credits-value":"Acknowledgement_credits-value__EZT9T","credits-icon":"Acknowledgement_credits-icon__SODz9","ack-container":"Acknowledgement_ack-container__SsLgy","ack-info-container":"Acknowledgement_ack-info-container__IWY8y","ack-order-date-time":"Acknowledgement_ack-order-date-time__GvOvf","ack-subtext-container":"Acknowledgement_ack-subtext-container__IXUow","ack-info":"Acknowledgement_ack-info__rJFC3","ack-items-card":"Acknowledgement_ack-items-card__Q10Vb","ack-image-card":"Acknowledgement_ack-image-card__yoqbO","ack-item-image":"Acknowledgement_ack-item-image__KA6QQ","quantity-badge":"Acknowledgement_quantity-badge__S83AI"};var g=t(927),h=t(7118),_=t(3494),v=t(6213),k=t(3417),x=t(579);const f=()=>{var e;const{userCredits:a,cartItems:t,setCredits:f,setCart:p}=(0,_._)(),{matric:A}=(0,h.h)(),[j,w]=(0,n.useState)(!1),[y,b]=(0,n.useState)(!1),[N,C]=(0,n.useState)(),S=(0,n.useRef)(!1),I=(null===(e=(0,r.zy)().state)||void 0===e?void 0:e.payload)||{},L=new Date,E=L.toLocaleDateString(),T=L.toLocaleTimeString(),O=t.map((e=>({...e,dateTime:(new Date).toLocaleString()})));console.log("Order Details:",O);const P=t.reduce(((e,a)=>{const t=a.quantity;return e+a.cost*t}),0),{credits:q,loading:D}=(0,k.A)(0===O.length?A:null);return(0,n.useEffect)((()=>{b(D),void 0!==q&&null!==q&&f(q)}),[D,q]),(0,n.useEffect)((()=>((async()=>{try{w(!0);const e=await v.A.post(g.Wn,I,{redirect:"follow",mode:"cors",method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"}});return C(e),"PURCHASE SUCCESSFUL"===e.data.status?(console.log("Purchase successful:",e.data.info),f(I.remainingCredits),void(S.current=!0)):void console.error("Purchase failed:",e.data.info.message)}catch(e){return void console.error("Error sending data to the server:",e)}finally{w(!1)}})(),()=>{S.current&&(p(0,[]),console.log("Leaving acknowledgement page..."))})),[]),(0,x.jsx)(s.A,{isLoading:j||!N||y,children:(0,x.jsx)(c.A,{children:(0,x.jsxs)(l.A,{children:[(0,x.jsxs)("div",{className:u["heading-space"],children:[(0,x.jsx)(i.A,{variant:"heading",children:"Acknowledgement"}),(0,x.jsx)(d.A,{to:"/shop"})]}),(0,x.jsx)("div",{className:u["credits-wrapper"],children:(0,x.jsxs)("div",{className:u.credits,children:[(0,x.jsx)(i.A,{variant:"body",className:u["credits-label"],children:"Inno Credits:"}),(0,x.jsx)(i.A,{variant:"body",className:u["credits-value"],children:a}),(0,x.jsx)("img",{src:m,alt:"Credits Icon",className:u["credits-icon"]})]})}),S.current?(0,x.jsxs)("div",{className:u["ack-container"],children:[(0,x.jsx)("div",{className:u["ack-info-container"],children:(0,x.jsx)("div",{className:u["ack-order-date-time"],children:(0,x.jsxs)(i.A,{variant:"body",children:["Order Datetime: ",E," ",T]})})}),(0,x.jsx)("div",{className:u["heading-text"],children:(0,x.jsx)(i.A,{variant:"smallHeading",children:"Thank You"})}),(0,x.jsxs)("div",{className:u["ack-subtext-container"],children:[(0,x.jsx)(i.A,{variant:"body",className:u["ack-subtext"]}),(0,x.jsx)(i.A,{variant:"body",className:u["ack-subtext"],children:"An email has been sent to you with the collection details."}),(0,x.jsx)(i.A,{variant:"body",className:u["ack-subtext"],children:"You can collect your items at the Garage Office (S2.2-B4-05) during opening hours."})]}),(0,x.jsx)("div",{className:u["ack-items-card"],children:O.map(((e,a)=>(0,x.jsxs)("div",{className:u["ack-image-card"],children:[(0,x.jsx)("div",{className:u["quantity-badge"],children:e.quantity}),(0,x.jsx)(o.A,{src:e.image,alt:`Item ${a+1}`,className:u["ack-item-image"],onError:e=>{e.target.onerror=null,e.target.src="/default-placeholder.png"}})]},a)))}),(0,x.jsx)("div",{className:u["ack-info"],children:(0,x.jsxs)(i.A,{variant:"body",children:["Total: ",P," Credits"]})})]}):(0,x.jsxs)("div",{className:u["ack-container"],children:[(0,x.jsx)("div",{className:u["heading-text"],children:(0,x.jsx)(i.A,{variant:"smallHeading",children:"Purchase Failed"})}),(0,x.jsxs)("div",{className:u["ack-subtext-container"],children:[(0,x.jsx)(i.A,{variant:"body",className:u["ack-subtext"],children:"We are unable to process your order at the moment."}),(0,x.jsx)(i.A,{variant:"body",className:u["ack-subtext"],children:"Please try again later."})]})]})]})})})}},9705:(e,a,t)=>{t.d(a,{h:()=>i});var n,r=t(5043);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)({}).hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},s.apply(null,arguments)}function c(e,a){let{title:t,titleId:c,...i}=e;return r.createElement("svg",s({width:24,height:24,viewBox:"0 0 24 24",fill:"current",xmlns:"http://www.w3.org/2000/svg",ref:a,"aria-labelledby":c},i),t?r.createElement("title",{id:c},t):null,n||(n=r.createElement("path",{d:"M17.835 3.8701L16.055 2.1001L6.16504 12.0001L16.065 21.9001L17.835 20.1301L9.70504 12.0001L17.835 3.8701Z",fill:"current"})))}const i=r.forwardRef(c);t.p},9913:(e,a,t)=>{t.d(a,{A:()=>i});var n=t(5043),r=t(5786);const s={spinner:"Image_spinner__zFdJR",image:"Image_image__y6uZu",loaded:"Image_loaded__gmNui","image-wrapper":"Image_image-wrapper__qTeOw"};var c=t(579);const i=(0,n.forwardRef)(((e,a)=>{let{src:t,alt:i,className:d,wrapperClassName:l,objectFit:o="cover",...m}=e;const[u,g]=(0,n.useState)(!0);return(0,c.jsxs)("div",{className:[s["image-wrapper"],l].filter(Boolean).join(" "),children:[u&&(0,c.jsx)("div",{className:s.spinner,children:(0,c.jsx)(r.A,{})}),(0,c.jsx)("img",{loading:"lazy",referrerPolicy:"no-referrer",style:{objectFit:o},className:[s.image,s[o],!u&&s.loaded,d].filter(Boolean).join(" "),src:t,alt:i,onLoad:()=>g(!1),...m,ref:a})]})}))}}]);
//# sourceMappingURL=697.f342bf79.chunk.js.map