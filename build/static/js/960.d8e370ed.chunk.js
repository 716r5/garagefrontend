"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[960],{2466:(e,t,a)=>{e.exports=a.p+"static/media/coin-icon.ef70a3a9cda1a723e8ea.png"},3264:(e,t,a)=>{a.d(t,{A:()=>n});const i="PageGap_wrapper__QxVU-";var r=a(579);const n=e=>{let{children:t}=e;return(0,r.jsx)("div",{className:i,children:t})}},3417:(e,t,a)=>{a.d(t,{A:()=>o});var i=a(5043),r=a(6213),n=a(927),s=a(7118),c=a(3494);function o(e){const{userCredits:t,setCredits:a}=(0,c._)(),[o,d]=(0,i.useState)(!1),{token:l,logoutAction:m}=(0,s.h)();return(0,i.useEffect)((()=>{if(!e)return;(async()=>{d(!0);try{const t={headers:{"Content-Type":"text/plain;charset=utf-8"},redirect:"follow",mode:"cors",method:"POST"},i=await r.A.post(n.on,{matric:e,type:"shopData",token:l},t);if("DATA RETRIEVAL SUCCESSFUL"===i.data.status&&a(i.data.info.currentInnocredit),"Invalid token"===i.data.error)return m(!0)}catch(t){console.error(t)}finally{d(!1)}})()}),[e]),{userCredits:t,loading:o}}},4881:(e,t,a)=>{a.d(t,{A:()=>o});const i="BackButton_detail-header-button__EQ4ZY";var r=a(3216),n=a(9705),s=a(3058),c=a(579);const o=e=>{let{to:t}=e;const a=(0,r.Zp)(),o="default"!==(0,r.zy)().key;return(0,c.jsx)(s.A,{className:i,onClick:()=>{a(t||(o?-1:"/"))},startIcon:(0,c.jsx)(n.h,{}),variant:"outlined",children:"Back"})}},7592:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var i=a(5043),r=a(6566),n=a(567),s=a(231),c=a(1750),o=a(4881),d=a(3264),l=a(9913),m=a(2466);const h=a.p+"static/media/shopping-cart.dc6f74bd8697f21bc1ad.png",p={credits:"Shop_credits__Cl9VI","shop-items-container":"Shop_shop-items-container__X-BtE","shop-item":"Shop_shop-item__OuolA","item-image":"Shop_item-image__jv6Nk","item-name":"Shop_item-name__RFQ8A","item-price":"Shop_item-price__A2mxZ","item-description":"Shop_item-description__dyuLB","item-stock":"Shop_item-stock__mPWnR","item-stock-quantity":"Shop_item-stock-quantity__JiZm5","quantity-controls":"Shop_quantity-controls__8YIxW","quantity-count":"Shop_quantity-count__+oGzm","quantity-zero":"Shop_quantity-zero__PhJu7",checkout:"Shop_checkout__OkCsc","purchase-warning-backdrop":"Shop_purchase-warning-backdrop__wcAgf","purchase-warning-modal":"Shop_purchase-warning-modal__nHiv-",modalAppear:"Shop_modalAppear__ZTAh7","cart-icon":"Shop_cart-icon__p3Om+","cart-count":"Shop_cart-count__DXp9o","cart-icon-wrapper":"Shop_cart-icon-wrapper__RfZCB","checkout-button":"Shop_checkout-button__FoXiq","heading-space":"Shop_heading-space__7XQ8J","heading-info-space":"Shop_heading-info-space__vtJ5b","credits-label":"Shop_credits-label__H1euK","credits-value":"Shop_credits-value__cnX7G","credits-icon":"Shop_credits-icon__gXesF","content-wrapper":"Shop_content-wrapper__CUX0E"};var u=a(3216),_=a(927),v=a(7118),g=a(3494),f=a(3417),j=a(579);const x=()=>{const{matric:e,token:t}=(0,v.h)(),{userCredits:a,cartCount:x,cartItems:N,setCredits:y,setCart:A}=(0,g._)(),[b,S]=(0,i.useState)({}),[k,w]=(0,i.useState)(!1),[C,I]=(0,i.useState)(!1),[q,E]=(0,i.useState)(!1),[L,O]=(0,i.useState)(!1),P=(0,u.Zp)(),{data:B,isShopLoading:F}=(0,r.A)({url:_.on+"?type=shopInventory&token="+t}),{credits:Z,loading:R}=(0,f.A)(e);(0,i.useEffect)((()=>{w(R),void 0!==Z&&null!==Z&&y(Z)}),[R,Z]);const z=(0,i.useMemo)((()=>B&&Array.isArray(B)?B.filter((e=>e.itemName&&void 0!==e.innocreditPrice)):[]),[B]);(0,i.useEffect)((()=>{if(B&&Array.isArray(B)){const e={};B.forEach((t=>{const a=N.find((e=>e.itemName===t.itemName));e[t.itemName]=a?a.quantity:0})),S(e)}}),[B,N]);const X=e=>{const t=z.filter((t=>e[t.itemName]&&e[t.itemName]>0)).map((t=>({itemName:t.itemName,quantity:e[t.itemName],cost:t.innocreditPrice,image:t.image.preview_url}))),a=(e=>Object.values(e).reduce(((e,t)=>e+t),0))(e);A(a,t)};return(0,j.jsx)(n.A,{isLoading:F||k||!B,children:(0,j.jsx)(s.A,{children:(0,j.jsxs)(d.A,{children:[L&&(0,j.jsx)("div",{className:p["purchase-warning-backdrop"],children:(0,j.jsxs)("div",{className:p["purchase-warning-modal"],children:[C&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.A,{variant:"smallHeading",children:"Insufficient Credits"}),(0,j.jsx)(c.A,{variant:"body",children:"You don't have enough credits to add this item."})]}),q&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.A,{variant:"smallHeading",children:"Empty Cart"}),(0,j.jsx)(c.A,{variant:"body",children:"Please add items before proceeding to checkout."})]}),(0,j.jsx)("button",{onClick:()=>{O(!1),E(!1),I(!1)},children:(0,j.jsx)(c.A,{variant:"body",children:"Confirm"})})]})}),(0,j.jsxs)("div",{className:p["heading-space"],children:[(0,j.jsx)(c.A,{variant:"heading",children:"Garage Shop"}),(0,j.jsx)(o.A,{})]}),(0,j.jsxs)("div",{className:p["heading-info-space"],children:[(0,j.jsx)(c.A,{variant:"smallHeading",children:"Welcome to Garage Shop"}),(0,j.jsxs)("div",{className:p.credits,children:[(0,j.jsx)(c.A,{variant:"body",className:p["credits-label"],children:"Inno Credits:"}),(0,j.jsx)(c.A,{variant:"body",className:p["credits-value"],children:k?"...":a}),(0,j.jsx)("img",{src:m,alt:"Credits Icon",className:p["credits-icon"]})]})]}),(0,j.jsx)("div",{className:p["shop-items-container"],children:z.map(((e,t)=>{var i;return(0,j.jsxs)("div",{className:p["shop-item"],children:[(0,j.jsx)("div",{className:p["image-wrapper"],children:(0,j.jsx)(l.A,{src:null!==(i=e.image)&&void 0!==i&&i.preview_url?e.image.preview_url:"/default-placeholder.png",alt:e.itemName?e.itemName:"Unnamed Item",className:p["item-image"],onError:e=>{e.target.onerror=null,e.target.src="/default-placeholder.png"}})}),(0,j.jsx)(c.A,{variant:"subtitle",className:p["item-description"],children:e.description||"No description available."}),(0,j.jsx)(c.A,{variant:"body",className:p["item-name"],children:e.itemName||"No Name"}),(0,j.jsxs)("div",{className:p["item-price"],children:[(0,j.jsxs)(c.A,{variant:"body",children:[e.innocreditPrice," Credits"]}),(0,j.jsx)("img",{src:m,alt:"Credits Icon",className:p["credits-icon"]})]}),(0,j.jsxs)("div",{className:p["item-stock-quantity"],children:[(0,j.jsx)(c.A,{variant:"body",className:p["item-stock"],children:e.inventory?`Stock: ${e.inventory}`:"Out of Stock"}),(0,j.jsxs)("div",{className:p["quantity-controls"],children:[(0,j.jsx)("button",{onClick:()=>(e=>{const t={...b,[e]:(b[e]||0)-1};S(t),X(t)})(e.itemName),disabled:!e.inventory||0===b[e.itemName],children:"-"}),(0,j.jsx)(c.A,{variant:"body",className:e.inventory?p["quantity-count"]:`${p["quantity-count"]} ${p["quantity-zero"]}`,children:b[e.itemName]}),(0,j.jsx)("button",{onClick:()=>(e=>{const t=z.find((t=>t.itemName===e)).innocreditPrice,i=Object.entries(b).reduce(((e,t)=>{let[a,i]=t;return e+z.find((e=>e.itemName===a)).innocreditPrice*i}),0);if(a-i-t<0)return O(!0),void I(!0);const r={...b,[e]:(b[e]||0)+1};S(r),X(r)})(e.itemName),disabled:!e.inventory||b[e.itemName]>=e.inventory,children:"+"})]})]})]},t)}))}),(0,j.jsx)("div",{className:p.checkout,children:(0,j.jsxs)("button",{className:p["checkout-button"],onClick:()=>{if(0===x)return O(!0),void E(!0);P("/checkout")},children:[(0,j.jsxs)("div",{className:p["cart-icon-wrapper"],children:[(0,j.jsx)("img",{src:h,alt:"Cart Icon",className:p["cart-icon"]}),x>0&&(0,j.jsx)("span",{className:p["cart-count"],children:x})]}),"Check Out"]})})]})})})}},9705:(e,t,a)=>{a.d(t,{h:()=>c});var i,r=a(5043);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},n.apply(null,arguments)}function s(e,t){let{title:a,titleId:s,...c}=e;return r.createElement("svg",n({width:24,height:24,viewBox:"0 0 24 24",fill:"current",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},c),a?r.createElement("title",{id:s},a):null,i||(i=r.createElement("path",{d:"M17.835 3.8701L16.055 2.1001L6.16504 12.0001L16.065 21.9001L17.835 20.1301L9.70504 12.0001L17.835 3.8701Z",fill:"current"})))}const c=r.forwardRef(s);a.p},9913:(e,t,a)=>{a.d(t,{A:()=>c});var i=a(5043),r=a(5786);const n={spinner:"Image_spinner__zFdJR",image:"Image_image__y6uZu",loaded:"Image_loaded__gmNui","image-wrapper":"Image_image-wrapper__qTeOw"};var s=a(579);const c=(0,i.forwardRef)(((e,t)=>{let{src:a,alt:c,className:o,wrapperClassName:d,objectFit:l="cover",...m}=e;const[h,p]=(0,i.useState)(!0);return(0,s.jsxs)("div",{className:[n["image-wrapper"],d].filter(Boolean).join(" "),children:[h&&(0,s.jsx)("div",{className:n.spinner,children:(0,s.jsx)(r.A,{})}),(0,s.jsx)("img",{loading:"lazy",referrerPolicy:"no-referrer",style:{objectFit:l},className:[n.image,n[l],!h&&n.loaded,o].filter(Boolean).join(" "),src:a,alt:c,onLoad:()=>p(!1),...m,ref:t})]})}))}}]);
//# sourceMappingURL=960.d8e370ed.chunk.js.map